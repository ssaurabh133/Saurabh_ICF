/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package com.login.action;

import java.sql.SQLException;
import java.util.ArrayList;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import org.apache.log4j.Logger;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;
import org.apache.struts.actions.DispatchAction;
import com.login.roleManager.UserObject;

/** 
 * MyEclipse Struts
 * Creation date: 07-21-2011
 * 
 * XDoclet definition:
 * @struts.action validate="true"
 */
public class LoginDispatchAction extends DispatchAction {
	
	private static final Logger logger = Logger.getLogger(LoginDispatchAction.class
			.getName());
	
	

	public ActionForward getbranch(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) throws SQLException {
//	
			return mapping.findForward("success");
	}
	public ActionForward setbranch(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) throws SQLException {
		
		logger.info("---LoginDispatchAction----in setbranch---");
		HttpSession session = request.getSession();
		//BranchActionForm  branchForm = (BranchActionForm) form;
		String branchId=request.getParameter("lbxBranchId");
		String branchName=request.getParameter("branchName");
		logger.info("branchId: "+branchId+"branchName: "+branchName);
		UserObject userObj = (UserObject)session.getAttribute("userobject");
		
		userObj.setBranchId(branchId);
		userObj.setBranchName(branchName);
		ArrayList branchList=new ArrayList();
		
		branchList.add(userObj);
		 
		    request.setAttribute("branchList", branchList);
			return mapping.findForward("success1");
	}
	
}