/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package com.caps.action;

import java.lang.reflect.InvocationTargetException;
import java.util.ArrayList;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import org.apache.log4j.Logger;
import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;
import com.caps.VO.CollCustomerAddressVo;
import com.caps.dao.CollDAO;
import com.connect.CommonFunction;
import com.connect.DaoImplInstanceFactory;
import com.login.roleManager.UserObject;

public class CollAddressBehindAction extends Action {
	private static final Logger logger = Logger.getLogger(CollAddressBehindAction.class.getName());
	
	public ActionForward execute(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) throws IllegalAccessException, InvocationTargetException,Exception {
		
		HttpSession session = request.getSession();
		boolean flag=false;
		UserObject userobj=(UserObject)session.getAttribute("userobject");
		if(userobj==null){
			logger.info("here execute method of CollAddressBehindAction action the session is out----------------");
			return mapping.findForward("sessionOut");
		}
		logger.info("In CollAddressBehindAction.......");
		ArrayList<CollCustomerAddressVo> addrList=new ArrayList<CollCustomerAddressVo>();
		String loanId=CommonFunction.checkNull(request.getParameter("loanId"));
		 CollDAO coll=(CollDAO)DaoImplInstanceFactory.getDaoImplInstance(CollDAO.IDENTITY);
		  logger.info("Implementation class: "+coll.getClass());
		addrList=coll.addresstype();
		request.setAttribute("addrList", addrList);
		request.setAttribute("loanId", loanId);
		String sms=CommonFunction.checkNull(request.getAttribute("sms"));
		ArrayList<CollCustomerAddressVo> defaultcountry= coll.defaultcountry();
		request.setAttribute("defaultcountry", defaultcountry);
		if(!sms.equalsIgnoreCase("")){
			request.setAttribute("sms",sms);	
		}
		
		return mapping.findForward("success");
	}
	
	
	
}